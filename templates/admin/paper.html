<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>edit</title>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/filepond/dist/filepond.css">

    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/css/bootstrap.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/css/bootstrap-theme.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
    <script src="{{ url_for('static', filename='bootstrap/js/bootstrap.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static',filename='editormd/css/editormd.css') }}"/>
    <link rel="icon" href="{{ url_for('static', filename='img/favicon.ico') }}">
    <script src="{{ url_for('static',filename='editormd/editormd.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static',filename='txtfile.js') }}"></script>

</head>
<body>
<div class="container">
    <div class="row clearfix">
        <div class="col-md-12 column">
            <div class="page-header">
                <h1>
                    MAGUS <small>è®ºæ–‡ç¼–è¾‘</small>
                </h1>
            </div>
            <ul class="breadcrumb">
                <li><a href="{{ url_for('.pic') }}">è½®æ’­å›¾ç¼–è¾‘</a></li>
                <li><a href="{{ url_for('.member') }}">æˆå‘˜ç¼–è¾‘</a></li>
                <li><a href="{{ url_for('.news') }}">å¿«è®¯ç¼–è¾‘</a></li>
                <li><a href="{{ url_for('.paper') }}">è®ºæ–‡ç¼–è¾‘</a></li>
                <li><a href="{{ url_for('.patent') }}">ä¸“åˆ©ç¼–è¾‘</a></li>
                <li><a href="{{ url_for('.competition') }}">ç«èµ›ç¼–è¾‘</a></li>
                <li><a href="{{ url_for('.partner') }}">åˆä½œæ–¹</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="container">
    <pre>
        è¯´æ˜ï¼š
            æ·»åŠ é“¾æ¥ï¼š##è®ºæ–‡æ–‡ä»¶å##  eg:##xxx.pdf##
            æ·»åŠ è§†é¢‘é“¾æ¥ï¼š$$è§†é¢‘æ–‡ä»¶å$$ eg:$$xxx.mp4$$
            æ·»åŠ è§†é¢‘é“¾æ¥ï¼š@@æµ·æŠ¥æ–‡ä»¶å@@ eg:@@xxx.png@@
            æ·»åŠ æ•°æ®é›†é“¾æ¥ï¼š&&æ•°æ®é›†æ–‡ä»¶å&& eg:&&xxx.zip&&
            å­—ç¬¦æ•°å°äº15çš„è¡Œå°†ä¼šè¢«åˆ¤æ–­ä¸ºå°æ ‡é¢˜ï¼Œç¬¬ä¸€ä¸ªå°æ ‡é¢˜ä¸‹çš„è®ºæ–‡éœ€é™„åŠ å›¾ç‰‡
            é™„åŠ å›¾ç‰‡çš„æ ¼å¼ä¸º å›¾ç‰‡å|è®ºæ–‡
            ä¿®æ”¹åç‚¹å‡»é¢„è§ˆï¼Œå¯ä»¥è¿›å…¥é¢„è§ˆç•Œé¢è¿›è¡Œå‘å¸ƒã€‚
    </pre>
    <form id="form" method="post">
        <div class="col-md-6 column">
            <div class="row" id="row_left"><style>
                #row_left {
                    margin-right: 0;
                    margin-left: 5;
                }
            </style>
            <h3 class="text-center">ä¸­æ–‡è®ºæ–‡ç¼–è¾‘</h3>
            <div id="zh-editormd">
                <textarea name="content_zh" id="content_zh">{{ content_zh }}</textarea>
            </div>
            </div>
        </div>

        <div class="col-md-6 column">
            <div class="row"  id="row_right"> <style>
                #row_right {
                    margin-right: 5;
                    margin-left: 0;
                }
            </style>
            <h3 class="text-center">è‹±æ–‡è®ºæ–‡ç¼–è¾‘</h3>
            <div id="editormd_en">
                <textarea name="content_en" id="content_en">{{ content_en }}</textarea>
            </div>
            </div>
        </div>
    </form>
        <div class="col-md-12 column">
        <div class="col-md-2 column">
            <div class="row no-gutter">
            <button class="btn btn-primary" type="button" onclick="submit_txt('form','/admin/update_paper/')">é¢„è§ˆ</button>
            </div>
        </div>
        <div class="col-md-2 column">
            <button hidden type="button" id="preview" disabled="disabled"
                    onclick="location.href='{{ url_for('.paper_preview') }}'">é¢„è§ˆ
            </button>
        </div>
        <div class="col-md-8 column"></div>
        <div style=" height:40px "></div>
    </div>
    <script type="text/javascript">
        var Editor_zh, Editor_en;
        $(function () {
                Editor_en = editormd("editormd_en", {
                    width: "100%",
                    height: 640,
                    syncScrolling: "single",
                    path: "{{ url_for('static',filename='editormd/lib/') }}",
                    imageUpload: false,
                    autoFocus : false,
                });
                Editor_zh = editormd("zh-editormd", {
                    width: "100%",
                    height: 640,
                    syncScrolling: "single",
                    path: "{{ url_for('static',filename='editormd/lib/') }}",
                    imageUpload: false,
                    autoFocus : false,
                    toolbarIcons : function() {
                    // Or return editormd.toolbarModes[name]; // full, simple, mini
                    // Using "||" set icons align right.
                    return ["undo", "redo", "|", "bold", "hr", "|", "preview", "watch", "|",  "info", "testIcon", "testIcon2", "file", "faicon", "||","testIcon"]
                    },
                    onload : function() {
                            console.log('onload', this);
                            this.unwatch();
                        }
                });
        });
    </script>
</div>

<div class="container">
    <div class="content">
        <input type="file" name="file" id="file" style="visibility: hidden"/>
    </div>
    <div style=" height:100px "></div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
<script src="https://unpkg.com/filepond/dist/filepond.min.js"></script>
<script src="https://unpkg.com/jquery-filepond/filepond.jquery.js"></script>
<script src="https://unpkg.com/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js"></script>
<script src="https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js"></script>



<script>
    $(function () {
        // file
        const fadeDuration = 500;
        localStorage.setItem('uniqueFileIds', JSON.stringify([]));
        let fileIds = [];
        $.fn.filepond.registerPlugin(FilePondPluginFileValidateSize, FilePondPluginFileValidateType);
        $('#file').filepond({
            maxFiles: 5,
            dropValidation: true,
            allowDrag: true,
            allowMultiple: true,
            labelIdle: 'æŠŠæ–‡ä»¶æ‹–åˆ°è¿™å„¿ æˆ– æµè§ˆæœ¬åœ°æ–‡ä»¶',
            labelInvalidField: 'åŒ…å«äº†æ— æ•ˆæ–‡ä»¶',
            labelFileWaitingForSize: 'æ­£åœ¨è·å–æ–‡ä»¶å¤§å°',
            labelFileSizeNotAvailable: 'è·å–ä¸åˆ°orz',
            labelFileLoading: 'æ­£åœ¨åŠ è½½æ–‡ä»¶',
            labelFileLoadError: 'åŠ è½½é”™è¯¯ï¼',
            labelFileProcessing: 'æ–‡ä»¶ä¸Šä¼ ä¸­',
            labelFileProcessingComplete: 'ä¸Šä¼ å®Œæˆ',
            labelFileProcessingAborted: 'å–æ¶ˆä¸Šä¼ å•¦',
            labelFileProcessingError: 'ä¸Šä¼ æ—¶é‡åˆ°é”™è¯¯',
            labelFileProcessingRevertError: 'æ’¤é”€æ—¶é‡åˆ°é”™è¯¯',
            labelFileRemoveError: 'åˆ é™¤æ—¶é‡åˆ°é”™è¯¯',
            labelTapToCancel: 'å–æ¶ˆ ğŸ‘‰',
            labelTapToRetry: 'é‡è¯• ğŸ‘‰',
            labelTapToUndo: 'æ’¤é”€ ğŸ‘‰',
            labelButtonRemoveItem: '',
            labelButtonAbortItemLoad: '',
            labelButtonRetryItemLoad: '',
            labelButtonAbortItemProcessing: '',
            labelButtonUndoItemProcessing: '',
            labelButtonRetryItemProcessing: '',
            labelButtonProcessItem: '',
            maxFileSize: '50MB',
            maxTotalFileSize: '100MB',
            labelMaxFileSizeExceeded: 'è¿™ä¸ªæ–‡ä»¶å¤ªå¤§å•¦ï¼',
            labelMaxFileSize: 'æœ€å¤šæœ€å¤šåªèƒ½ {filesize} å“¦',
            labelMaxTotalFileSizeExceeded: 'æ–‡ä»¶åŠ èµ·æ¥å¤ªå¤§äº†',
            labelMaxTotalFileSize: 'æœ€å¤šåªèƒ½ {filesize} å•¦',
            server: {
                url: '{{ host }}',
                process: {
                    url: "{{ url_for('handle_files') }}",
                    method: 'POST',
                    onload: (response) => {
                        response = JSON.parse(response);
                        if (response.code === 0) {
                            let fileId = response.data;
                            fileIds.push(fileId);
                            return fileId;
                        } else if (response.code === -1) {
                            $('#file-type-warning').fadeIn(fadeDuration);
                            setTimeout(() => {
                                $('#file-type-warning').fadeOut(fadeDuration);
                            }, 3000);
                            console.log(response.msg);
                        } else {
                            console.log(response.msg);
                        }
                    },
                    onerror: (response) => {
                        console.log(response);
                    }
                },
                revert: {
                    url: '{{ url_for('handle_files') }}',
                    onload: (response) => {
                        response = JSON.parse(response);
                        let fileId = response.data;
                        let index = fileIds.indexOf(fileId);
                        if (index > -1) {
                            fileIds.splice(index, 1)
                        }
                        return fileId;
                    }
                },
                fetch: null,
                load: null,
                restore: null
            }
        });
    });
</script>
</body>
</html>
